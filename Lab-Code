// Pin assignments
const int redPin = 7;
const int yellowPin = 6;
const int greenPin = 5;
const int buttonPin = 2;

int buttonState = 0;

void setup() {
  pinMode(redPin, OUTPUT);
  pinMode(yellowPin, OUTPUT);
  pinMode(greenPin, OUTPUT);
  pinMode(buttonPin, INPUT_PULLUP);  // Button connected to GND
}

void loop() {
  buttonState = digitalRead(buttonPin);

  if (buttonState == LOW) {  
    // Button pressed -> turn on RED light
    digitalWrite(redPin, HIGH);
    digitalWrite(yellowPin, LOW);
    digitalWrite(greenPin, LOW);
    delay(5000); // hold red for 5 seconds
  } 
  else {
    // Normal traffic cycle
    // Green
    digitalWrite(greenPin, HIGH);
    digitalWrite(yellowPin, LOW);
    digitalWrite(redPin, LOW);
    delay(5000);

    // Yellow
    digitalWrite(greenPin, LOW);
    digitalWrite(yellowPin, HIGH);
    digitalWrite(redPin, LOW);
    delay(2000);

    // Red
    digitalWrite(greenPin, LOW);
    digitalWrite(yellowPin, LOW);
    digitalWrite(redPin, HIGH);
    delay(5000);
  }
}
